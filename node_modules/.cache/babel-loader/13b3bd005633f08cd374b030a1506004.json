{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/src/components/layout/Notifi.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable prettier/prettier */\nimport React, { useEffect, useState } from 'react';\nimport { List, Avatar } from 'antd';\nimport { firestore } from 'firebase-config';\nimport axios from 'utils/axios';\n\nfunction Notifi(_ref) {\n  _s();\n\n  var _this = this;\n\n  var role = _ref.role;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var initData = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              axios.get('/profile').then( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(res) {\n                  var dataTemp;\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          dataTemp = res.data.data;\n                          console.log(dataTemp);\n                          _context3.next = 4;\n                          return firestore().collection('notifications').where('receiver', '==', dataTemp === null || dataTemp === void 0 ? void 0 : dataTemp._id).onSnapshot( /*#__PURE__*/function () {\n                            var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(documentSnapshot) {\n                              var notifications;\n                              return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                                while (1) {\n                                  switch (_context2.prev = _context2.next) {\n                                    case 0:\n                                      notifications = [];\n                                      _context2.next = 3;\n                                      return documentSnapshot.forEach( /*#__PURE__*/function () {\n                                        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(doc) {\n                                          var _room$data$data$room;\n\n                                          var room;\n                                          return _regeneratorRuntime.wrap(function _callee$(_context) {\n                                            while (1) {\n                                              switch (_context.prev = _context.next) {\n                                                case 0:\n                                                  _context.next = 2;\n                                                  return axios.get(\"/rooms/\".concat(doc.data().roomId));\n\n                                                case 2:\n                                                  room = _context.sent;\n                                                  notifications.push({\n                                                    roomName: (_room$data$data$room = room.data.data.room) === null || _room$data$data$room === void 0 ? void 0 : _room$data$data$room.name,\n                                                    roomId: doc.data().roomId,\n                                                    type: doc.data().type\n                                                  }); // await setData([...data, {\n                                                  //   roomName: room.data.data.room?.name,\n                                                  //   roomId: doc.data().roomId,\n                                                  //   type: doc.data().type\n                                                  // }])\n\n                                                  console.log(data);\n                                                  debugger; // await setData([...data, {\n                                                  //   roomName: room.data.data.room?.name,\n                                                  //   roomId: doc.data().roomId,\n                                                  //   type: doc.data().type\n                                                  // }])\n\n                                                case 6:\n                                                case \"end\":\n                                                  return _context.stop();\n                                              }\n                                            }\n                                          }, _callee);\n                                        }));\n\n                                        return function (_x3) {\n                                          return _ref5.apply(this, arguments);\n                                        };\n                                      }());\n\n                                    case 3:\n                                      setData(notifications);\n                                      debugger;\n\n                                    case 5:\n                                    case \"end\":\n                                      return _context2.stop();\n                                  }\n                                }\n                              }, _callee2);\n                            }));\n\n                            return function (_x2) {\n                              return _ref4.apply(this, arguments);\n                            };\n                          }());\n\n                        case 4:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3);\n                }));\n\n                return function (_x) {\n                  return _ref3.apply(this, arguments);\n                };\n              }());\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function initData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    initData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(List, {\n    itemLayout: \"horizontal\",\n    dataSource: data,\n    renderItem: function renderItem(item) {\n      return /*#__PURE__*/_jsxDEV(List.Item, {\n        children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n            src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, _this),\n          title: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://ant.design\",\n            children: item === null || item === void 0 ? void 0 : item.roomName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 18\n          }, _this),\n          description: \"Ant Design, a design language for background applications, is refined by Ant UED Team\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, _this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 11\n  }, this);\n}\n\n_s(Notifi, \"IEMTtLVFIuToo7X/raQbJAxzNQU=\");\n\n_c = Notifi;\nexport default Notifi;\n\nvar _c;\n\n$RefreshReg$(_c, \"Notifi\");","map":{"version":3,"sources":["/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/src/components/layout/Notifi.tsx"],"names":["React","useEffect","useState","List","Avatar","firestore","axios","Notifi","role","data","setData","initData","get","then","res","dataTemp","console","log","collection","where","_id","onSnapshot","documentSnapshot","notifications","forEach","doc","roomId","room","push","roomName","name","type","item"],"mappings":";;;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,MAA7B;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,OAAOC,KAAP,MAAkB,aAAlB;;AAOA,SAASC,MAAT,OAAiD;AAAA;;AAAA;;AAAA,MAA/BC,IAA+B,QAA/BA,IAA+B;;AAAA,kBACvBN,QAAQ,CAAsB,EAAtB,CADe;AAAA;AAAA,MACxCO,IADwC;AAAA,MAClCC,OADkC;;AAE/C,MAAMC,QAAQ;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AACfL,cAAAA,KAAK,CAACM,GAAN,CAAU,UAAV,EAAsBC,IAAtB;AAAA,qFAA2B,kBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBC,0BAAAA,QADmB,GACRD,GAAG,CAACL,IAAJ,CAASA,IADD;AAEzBO,0BAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AAFyB;AAAA,iCAGnBV,SAAS,GAAGa,UAAZ,CAAuB,eAAvB,EAAwCC,KAAxC,CAA8C,UAA9C,EAA0D,IAA1D,EAAgEJ,QAAhE,aAAgEA,QAAhE,uBAAgEA,QAAQ,CAAEK,GAA1E,EAA+EC,UAA/E;AAAA,iGAA0F,kBAAOC,gBAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1FC,sCAAAA,aAD0F,GAC1E,EAD0E;AAAA;AAAA,6CAExFD,gBAAgB,CAACE,OAAjB;AAAA,6GAAyB,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDACVnB,KAAK,CAACM,GAAN,kBAAoBa,GAAG,CAAChB,IAAJ,GAAWiB,MAA/B,EADU;;AAAA;AACvBC,kDAAAA,IADuB;AAE7BJ,kDAAAA,aAAa,CAACK,IAAd,CAAmB;AACjBC,oDAAAA,QAAQ,0BAAEF,IAAI,CAAClB,IAAL,CAAUA,IAAV,CAAekB,IAAjB,yDAAE,qBAAqBG,IADd;AAEjBJ,oDAAAA,MAAM,EAAED,GAAG,CAAChB,IAAJ,GAAWiB,MAFF;AAGjBK,oDAAAA,IAAI,EAAEN,GAAG,CAAChB,IAAJ,GAAWsB;AAHA,mDAAnB,EAF6B,CAO7B;AACA;AACA;AACA;AACA;;AACAf,kDAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AACA,2DAb6B,CAc7B;AACA;AACA;AACA;AACA;;AAlB6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAAzB;;AAAA;AAAA;AAAA;AAAA,0CAFwF;;AAAA;AAsB9FC,sCAAAA,OAAO,CAACa,aAAD,CAAP;AACA;;AAvB8F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAA1F;;AAAA;AAAA;AAAA;AAAA,8BAHmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA3B;;AAAA;AAAA;AAAA;AAAA;;AADe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARZ,QAAQ;AAAA;AAAA;AAAA,KAAd;;AA+BAV,EAAAA,SAAS,CAAC,YAAM;AACdU,IAAAA,QAAQ;AACT,GAFQ,EAEN,EAFM,CAAT;AAGA,sBAAQ,QAAC,IAAD;AACN,IAAA,UAAU,EAAC,YADL;AAEN,IAAA,UAAU,EAAEF,IAFN;AAGN,IAAA,UAAU,EAAE,oBAACuB,IAAD;AAAA,0BACV,QAAC,IAAD,CAAM,IAAN;AAAA,+BACE,QAAC,IAAD,CAAM,IAAN,CAAW,IAAX;AACE,UAAA,MAAM,eACJ,QAAC,MAAD;AAAQ,YAAA,GAAG,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,mBAFJ;AAIE,UAAA,KAAK,eAAE;AAAG,YAAA,IAAI,EAAC,oBAAR;AAAA,sBAA8BA,IAA9B,aAA8BA,IAA9B,uBAA8BA,IAAI,CAAEH;AAApC;AAAA;AAAA;AAAA;AAAA,mBAJT;AAKE,UAAA,WAAW,EAAC;AALd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,eADU;AAAA;AAHN;AAAA;AAAA;AAAA;AAAA,UAAR;AAeD;;GAnDQtB,M;;KAAAA,M;AAqDT,eAAeA,MAAf","sourcesContent":["/* eslint-disable prettier/prettier */\nimport React, { useEffect, useState } from 'react'\nimport { List, Avatar } from 'antd'\nimport { firestore } from 'firebase-config'\nimport axios from 'utils/axios'\n\ntype Notification = {\n  roomName: string,\n  roomId: string,\n  type: string\n}\nfunction Notifi({ role }: { role: string }): any {\n  const [data, setData] = useState<Array<Notification>>([])\n  const initData = async () => {\n    axios.get('/profile').then(async (res) => {\n      const dataTemp = res.data.data as any\n      console.log(dataTemp)\n      await firestore().collection('notifications').where('receiver', '==', dataTemp?._id).onSnapshot(async (documentSnapshot) => {\n        let notifications = [] as Array<Notification>\n        await documentSnapshot.forEach(async (doc) => {\n          const room = await axios.get(`/rooms/${doc.data().roomId}`)\n          notifications.push({\n            roomName: room.data.data.room?.name,\n            roomId: doc.data().roomId,\n            type: doc.data().type\n          })\n          // await setData([...data, {\n          //   roomName: room.data.data.room?.name,\n          //   roomId: doc.data().roomId,\n          //   type: doc.data().type\n          // }])\n          console.log(data)\n          debugger\n          // await setData([...data, {\n          //   roomName: room.data.data.room?.name,\n          //   roomId: doc.data().roomId,\n          //   type: doc.data().type\n          // }])\n        })\n        setData(notifications)\n        debugger\n      })\n    })\n  }\n  useEffect(() => {\n    initData()\n  }, [])\n  return (<List\n    itemLayout='horizontal'\n    dataSource={data}\n    renderItem={(item) => (\n      <List.Item>\n        <List.Item.Meta\n          avatar={\n            <Avatar src='https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png' />\n          }\n          title={<a href='https://ant.design'>{item?.roomName}</a>}\n          description='Ant Design, a design language for background applications, is refined by Ant UED Team'\n        />\n      </List.Item>\n    )}\n  />)\n}\n\nexport default Notifi\n"]},"metadata":{},"sourceType":"module"}