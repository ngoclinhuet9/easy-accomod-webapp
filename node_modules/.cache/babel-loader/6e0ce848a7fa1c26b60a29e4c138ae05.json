{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/src/pages/owner/CreatPlace.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/* eslint-disable operator-linebreak */\nimport { Box, Button, useToast } from '@chakra-ui/react';\nimport PlaceInformation from 'components/new-place/place-information/PlaceInformation';\nimport PlaceImage from 'components/new-place/place-image/PlaceImage';\nimport PricePolicy from 'components/new-place/price-policy/PricePolicy';\nimport React, { useEffect, useState } from 'react';\nimport 'antd/dist/antd.css';\nimport OwnerLayout from 'layouts/OwnerLayout';\nimport { Steps } from 'antd';\nimport axios from 'utils/axios';\nimport { useHistory, useParams } from 'react-router-dom';\nvar Step = Steps.Step;\n\nvar CreatePlace = function CreatePlace(_ref) {\n  _s();\n\n  var data = _ref.data,\n      status = _ref.status;\n  var params = useParams();\n  var history = useHistory();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isCompletePlaceInfo = _useState2[0],\n      setIsCompletePlaceInfo = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isCompletePlaceImage = _useState4[0],\n      setIsCompletePlaceImage = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isCompletePlacePolicy = _useState6[0],\n      setIsCompletePlacePolicy = _useState6[1];\n\n  var _useState7 = useState({\n    name: data ? data.name : '',\n    description: (data === null || data === void 0 ? void 0 : data.description) || '',\n    city: (data === null || data === void 0 ? void 0 : data.city) || '',\n    roomType: (data === null || data === void 0 ? void 0 : data.roomType) || '',\n    address: (data === null || data === void 0 ? void 0 : data.address) || '',\n    rule: (data === null || data === void 0 ? void 0 : data.rule) || '',\n    area: (data === null || data === void 0 ? void 0 : data.area) || 15,\n    bathroomType: (data === null || data === void 0 ? void 0 : data.bathroomType) || 'PRIVATE',\n    kitchenType: (data === null || data === void 0 ? void 0 : data.kitchenType) || 'PRIVATE',\n    isWithOwner: (data === null || data === void 0 ? void 0 : data.isWithOwner) || true,\n    hasWaterHeater: (data === null || data === void 0 ? void 0 : data.hasWaterHeater) || true,\n    hasConditioner: (data === null || data === void 0 ? void 0 : data.hasConditioner) || true,\n    hasBalcony: (data === null || data === void 0 ? void 0 : data.hasBalcony) || true,\n    hasFridge: (data === null || data === void 0 ? void 0 : data.hasFridge) || true,\n    hasBed: (data === null || data === void 0 ? void 0 : data.hasBed) || true,\n    hasWardrobe: (data === null || data === void 0 ? void 0 : data.hasWardrobe) || true\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      placeInfo = _useState8[0],\n      setPlaceInfo = _useState8[1];\n\n  useEffect(function () {\n    if (data) {\n      debugger;\n      setPlaceInfo(data);\n      setPlaceImage(data.images);\n      setPlacePolicy(data);\n    }\n  }, [data]);\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      placeImage = _useState10[0],\n      setPlaceImage = _useState10[1];\n\n  var _useState11 = useState({\n    roomPrice: 500000,\n    waterPrice: 5000,\n    electricityPrice: 5000\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      placePolicy = _useState12[0],\n      setPlacePolicy = _useState12[1];\n\n  var toast = useToast();\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      current = _useState14[0],\n      setCurrent = _useState14[1];\n\n  useEffect(function () {\n    if ((placeImage === null || placeImage === void 0 ? void 0 : placeImage.length) >= 3) {\n      setIsCompletePlaceImage(true);\n    }\n  }, [placeImage]);\n\n  var next = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, _res, _res2, _error$response;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              window.scrollTo({\n                top: 0,\n                behavior: 'smooth'\n              });\n\n              if (!(current === 0 && isCompletePlaceInfo)) {\n                _context.next = 5;\n                break;\n              }\n\n              setCurrent(1);\n              _context.next = 38;\n              break;\n\n            case 5:\n              if (!(current === 1 && isCompletePlaceInfo && isCompletePlaceImage)) {\n                _context.next = 9;\n                break;\n              }\n\n              setCurrent(2);\n              _context.next = 38;\n              break;\n\n            case 9:\n              if (!(current === 2 && isCompletePlaceInfo && isCompletePlaceImage && isCompletePlacePolicy)) {\n                _context.next = 37;\n                break;\n              }\n\n              _context.prev = 10;\n\n              if (!(status === 'renew')) {\n                _context.next = 18;\n                break;\n              }\n\n              _context.next = 14;\n              return axios({\n                url: \"/rooms/\".concat(params === null || params === void 0 ? void 0 : params.room_id, \"/renew\"),\n                method: 'put',\n                data: _objectSpread(_objectSpread({}, placeInfo), {}, {\n                  images: placeImage\n                }, placePolicy)\n              });\n\n            case 14:\n              res = _context.sent;\n\n              if (res) {\n                toast({\n                  title: 'Thành công',\n                  description: 'Bạn đã đăng lại bài thành công, bài viết của bạn đang được chờ phê duyệt',\n                  status: 'success',\n                  duration: 3000,\n                  isClosable: true,\n                  position: 'top'\n                });\n                history.push(\"/rooms/\".concat(params === null || params === void 0 ? void 0 : params.room_id, \"/preview\"));\n                console.log(res.data.data.owner); // await firestore.collection('notifications').add({\n                //   sender: res.data.data.owner,\n                //   senderType: 'owner',\n                //   receiver: '',\n                //   receiverType: 'admin',\n                //   roomId: res.data.data._id,\n                //   type: 'CREATE_ROOM',\n                // })\n              }\n\n              _context.next = 29;\n              break;\n\n            case 18:\n              if (!(status === 'update')) {\n                _context.next = 25;\n                break;\n              }\n\n              _context.next = 21;\n              return axios({\n                url: \"/rooms/\".concat(params === null || params === void 0 ? void 0 : params.room_id, \"/update\"),\n                method: 'put',\n                data: _objectSpread(_objectSpread({}, placeInfo), {}, {\n                  images: placeImage\n                }, placePolicy)\n              });\n\n            case 21:\n              _res = _context.sent;\n\n              if (_res) {\n                toast({\n                  title: 'Thành công',\n                  description: 'Bạn đã cập nhật bài viết thành công',\n                  status: 'success',\n                  duration: 3000,\n                  isClosable: true,\n                  position: 'top'\n                });\n                history.push(\"/rooms/\".concat(params === null || params === void 0 ? void 0 : params.room_id, \"/preview\"));\n                console.log(_res.data.data.owner); // await firestore.collection('notifications').add({\n                //   sender: res.data.data.owner,\n                //   senderType: 'owner',\n                //   receiver: '',\n                //   receiverType: 'admin',\n                //   roomId: res.data.data._id,\n                //   type: 'CREATE_ROOM',\n                // })\n              }\n\n              _context.next = 29;\n              break;\n\n            case 25:\n              _context.next = 27;\n              return axios({\n                url: \"/rooms/create\",\n                method: 'post',\n                data: _objectSpread(_objectSpread({}, placeInfo), {}, {\n                  images: placeImage\n                }, placePolicy)\n              });\n\n            case 27:\n              _res2 = _context.sent;\n\n              if (_res2) {\n                toast({\n                  title: 'Thành công',\n                  description: 'Bạn đã đăng bài thành công, bài viết của bạn đang được chờ phê duyệt',\n                  status: 'success',\n                  duration: 3000,\n                  isClosable: true,\n                  position: 'top'\n                });\n                history.push(\"/rooms/\".concat(_res2.data.data._id, \"/preview\"));\n                console.log(_res2.data.data.owner); // await firestore.collection('notifications').add({\n                //   sender: res.data.data.owner,\n                //   senderType: 'owner',\n                //   receiver: '',\n                //   receiverType: 'admin',\n                //   roomId: res.data.data._id,\n                //   type: 'CREATE_ROOM',\n                // })\n              }\n\n            case 29:\n              _context.next = 35;\n              break;\n\n            case 31:\n              _context.prev = 31;\n              _context.t0 = _context[\"catch\"](10);\n              console.log(_context.t0);\n              toast({\n                title: 'Sai định dạng dữ liệu',\n                description: _context.t0 === null || _context.t0 === void 0 ? void 0 : (_error$response = _context.t0.response) === null || _error$response === void 0 ? void 0 : _error$response.message,\n                status: 'error',\n                duration: 3000,\n                isClosable: true,\n                position: 'top'\n              });\n\n            case 35:\n              _context.next = 38;\n              break;\n\n            case 37:\n              toast({\n                title: 'Bạn cần điền đầy đủ thông tin',\n                description: 'Vui lòng điền vào những trường yêu cầu',\n                status: 'error',\n                duration: 3000,\n                isClosable: true,\n                position: 'top'\n              });\n\n            case 38:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[10, 31]]);\n    }));\n\n    return function next() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var prev = function prev() {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n    setCurrent(current - 1);\n  };\n\n  var steps = [{\n    title: 'Thông tin chỗ nghỉ',\n    content: /*#__PURE__*/_jsxDEV(PlaceInformation, {\n      completeStep: setIsCompletePlaceInfo,\n      syncData: setPlaceInfo,\n      data: placeInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }, _this)\n  }, {\n    title: 'Hình ảnh chỗ nghỉ',\n    content: /*#__PURE__*/_jsxDEV(PlaceImage, {\n      completeStep: setIsCompletePlaceImage,\n      syncData: setPlaceImage,\n      imageData: placeImage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, _this)\n  }, {\n    title: 'Giá và quy định nhận chỗ',\n    content: /*#__PURE__*/_jsxDEV(PricePolicy, {\n      completeStep: setIsCompletePlacePolicy,\n      syncData: setPlacePolicy,\n      data: placePolicy\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, _this)\n  }];\n  return /*#__PURE__*/_jsxDEV(OwnerLayout, {\n    title: placeInfo === null || placeInfo === void 0 ? void 0 : placeInfo.name,\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      mb: 5,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        maxW: \"80%\",\n        m: \"30px auto\",\n        pb: 5,\n        children: [/*#__PURE__*/_jsxDEV(Steps, {\n          current: current,\n          direction: \"horizontal\",\n          children: steps.map(function (item) {\n            return /*#__PURE__*/_jsxDEV(Step, {\n              title: item.title,\n              style: {\n                fontWeight: 'bold'\n              }\n            }, item.title, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"steps-content\",\n          children: steps[current].content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"steps-action buttonWrapperClass\",\n          children: [current < steps.length - 1 && /*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"orange\",\n            mr: 5,\n            onClick: function onClick() {\n              return next();\n            },\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, _this), current === steps.length - 1 && /*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"orange\",\n            mr: 5,\n            onClick: function onClick() {\n              return next();\n            },\n            children: \"Done\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, _this), current > 0 && /*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"teal\",\n            onClick: function onClick() {\n              return prev();\n            },\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CreatePlace, \"CduZhDrOYoTMmb3ZTKLZx7JK7uY=\", false, function () {\n  return [useParams, useHistory, useToast];\n});\n\n_c = CreatePlace;\nexport default CreatePlace;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreatePlace\");","map":{"version":3,"sources":["/Users/linhvtn/Desktop/workspace/easy-accomod-webapp/src/pages/owner/CreatPlace.tsx"],"names":["Box","Button","useToast","PlaceInformation","PlaceImage","PricePolicy","React","useEffect","useState","OwnerLayout","Steps","axios","useHistory","useParams","Step","CreatePlace","data","status","params","history","isCompletePlaceInfo","setIsCompletePlaceInfo","isCompletePlaceImage","setIsCompletePlaceImage","isCompletePlacePolicy","setIsCompletePlacePolicy","name","description","city","roomType","address","rule","area","bathroomType","kitchenType","isWithOwner","hasWaterHeater","hasConditioner","hasBalcony","hasFridge","hasBed","hasWardrobe","placeInfo","setPlaceInfo","setPlaceImage","images","setPlacePolicy","placeImage","roomPrice","waterPrice","electricityPrice","placePolicy","toast","current","setCurrent","length","next","window","scrollTo","top","behavior","url","room_id","method","res","title","duration","isClosable","position","push","console","log","owner","_id","response","message","prev","steps","content","map","item","fontWeight"],"mappings":"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","sourcesContent":["/* eslint-disable operator-linebreak */\nimport { Box, Button, useToast } from '@chakra-ui/react'\nimport PlaceInformation from 'components/new-place/place-information/PlaceInformation'\nimport PlaceImage from 'components/new-place/place-image/PlaceImage'\nimport PricePolicy from 'components/new-place/price-policy/PricePolicy'\nimport React, { useEffect, useState } from 'react'\nimport 'antd/dist/antd.css'\nimport OwnerLayout from 'layouts/OwnerLayout'\nimport { Steps } from 'antd'\nimport axios from 'utils/axios'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { firestore } from 'firebase-config'\n\nconst { Step } = Steps\ntype Params = {\n  room_id: string\n}\nconst CreatePlace = ({ data, status }: { data?: any; status: string }) => {\n  const params: Params = useParams()\n  const history = useHistory()\n  const [isCompletePlaceInfo, setIsCompletePlaceInfo] = useState(false)\n  const [isCompletePlaceImage, setIsCompletePlaceImage] = useState(false)\n  const [isCompletePlacePolicy, setIsCompletePlacePolicy] = useState(false)\n  const [placeInfo, setPlaceInfo] = useState({\n    name: data ? data.name : '',\n    description: data?.description || '',\n    city: data?.city || '',\n    roomType: data?.roomType || '',\n    address: data?.address || '',\n    rule: data?.rule || '',\n    area: data?.area || 15,\n    bathroomType: data?.bathroomType || 'PRIVATE',\n    kitchenType: data?.kitchenType || 'PRIVATE',\n    isWithOwner: data?.isWithOwner || true,\n    hasWaterHeater: data?.hasWaterHeater || true,\n    hasConditioner: data?.hasConditioner || true,\n    hasBalcony: data?.hasBalcony || true,\n    hasFridge: data?.hasFridge || true,\n    hasBed: data?.hasBed || true,\n    hasWardrobe: data?.hasWardrobe || true,\n  })\n  useEffect(() => {\n    if (data) {\n      debugger\n      setPlaceInfo(data)\n      setPlaceImage(data.images)\n      setPlacePolicy(data)\n    }\n  }, [data])\n\n  const [placeImage, setPlaceImage] = useState<Array<string>>([])\n  const [placePolicy, setPlacePolicy] = useState({\n    roomPrice: 500000,\n    waterPrice: 5000,\n    electricityPrice: 5000,\n  })\n\n  const toast = useToast()\n\n  const [current, setCurrent] = useState(0)\n\n  useEffect(() => {\n    if (placeImage?.length >= 3) {\n      setIsCompletePlaceImage(true)\n    }\n  }, [placeImage])\n\n  const next = async () => {\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n    if (current === 0 && isCompletePlaceInfo) {\n      setCurrent(1)\n    } else if (current === 1 && isCompletePlaceInfo && isCompletePlaceImage) {\n      setCurrent(2)\n    } else if (\n      current === 2 &&\n      isCompletePlaceInfo &&\n      isCompletePlaceImage &&\n      isCompletePlacePolicy\n    ) {\n      try {\n        if (status === 'renew') {\n          const res = await axios({\n            url: `/rooms/${params?.room_id}/renew`,\n            method: 'put',\n            data: { ...placeInfo, images: placeImage, ...placePolicy },\n          })\n          if (res) {\n            toast({\n              title: 'Thành công',\n              description:\n                'Bạn đã đăng lại bài thành công, bài viết của bạn đang được chờ phê duyệt',\n              status: 'success',\n              duration: 3000,\n              isClosable: true,\n              position: 'top',\n            })\n            history.push(`/rooms/${params?.room_id}/preview`)\n            console.log(res.data.data.owner)\n            // await firestore.collection('notifications').add({\n            //   sender: res.data.data.owner,\n            //   senderType: 'owner',\n            //   receiver: '',\n            //   receiverType: 'admin',\n            //   roomId: res.data.data._id,\n            //   type: 'CREATE_ROOM',\n            // })\n          }\n        } else if (status === 'update') {\n          const res = await axios({\n            url: `/rooms/${params?.room_id}/update`,\n            method: 'put',\n            data: { ...placeInfo, images: placeImage, ...placePolicy },\n          })\n          if (res) {\n            toast({\n              title: 'Thành công',\n              description: 'Bạn đã cập nhật bài viết thành công',\n              status: 'success',\n              duration: 3000,\n              isClosable: true,\n              position: 'top',\n            })\n            history.push(`/rooms/${params?.room_id}/preview`)\n            console.log(res.data.data.owner)\n            // await firestore.collection('notifications').add({\n            //   sender: res.data.data.owner,\n            //   senderType: 'owner',\n            //   receiver: '',\n            //   receiverType: 'admin',\n            //   roomId: res.data.data._id,\n            //   type: 'CREATE_ROOM',\n            // })\n          }\n        } else {\n          const res = await axios({\n            url: `/rooms/create`,\n            method: 'post',\n            data: { ...placeInfo, images: placeImage, ...placePolicy },\n          })\n          if (res) {\n            toast({\n              title: 'Thành công',\n              description:\n                'Bạn đã đăng bài thành công, bài viết của bạn đang được chờ phê duyệt',\n              status: 'success',\n              duration: 3000,\n              isClosable: true,\n              position: 'top',\n            })\n            history.push(`/rooms/${res.data.data._id}/preview`)\n            console.log(res.data.data.owner)\n            // await firestore.collection('notifications').add({\n            //   sender: res.data.data.owner,\n            //   senderType: 'owner',\n            //   receiver: '',\n            //   receiverType: 'admin',\n            //   roomId: res.data.data._id,\n            //   type: 'CREATE_ROOM',\n            // })\n          }\n        }\n      } catch (error) {\n        console.log(error)\n        toast({\n          title: 'Sai định dạng dữ liệu',\n          description: error?.response?.message,\n          status: 'error',\n          duration: 3000,\n          isClosable: true,\n          position: 'top',\n        })\n      }\n    } else {\n      toast({\n        title: 'Bạn cần điền đầy đủ thông tin',\n        description: 'Vui lòng điền vào những trường yêu cầu',\n        status: 'error',\n        duration: 3000,\n        isClosable: true,\n        position: 'top',\n      })\n    }\n  }\n\n  const prev = () => {\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n    setCurrent(current - 1)\n  }\n\n  const steps = [\n    {\n      title: 'Thông tin chỗ nghỉ',\n      content: (\n        <PlaceInformation\n          completeStep={setIsCompletePlaceInfo}\n          syncData={setPlaceInfo}\n          data={placeInfo}\n        />\n      ),\n    },\n    {\n      title: 'Hình ảnh chỗ nghỉ',\n      content: (\n        <PlaceImage\n          completeStep={setIsCompletePlaceImage}\n          syncData={setPlaceImage}\n          imageData={placeImage}\n        />\n      ),\n    },\n    {\n      title: 'Giá và quy định nhận chỗ',\n      content: (\n        <PricePolicy\n          completeStep={setIsCompletePlacePolicy}\n          syncData={setPlacePolicy}\n          data={placePolicy}\n        />\n      ),\n    },\n  ]\n\n  return (\n    <OwnerLayout title={placeInfo?.name}>\n      <Box mb={5}>\n        <Box maxW='80%' m='30px auto' pb={5}>\n          <Steps current={current} direction='horizontal'>\n            {steps.map((item) => (\n              <Step\n                key={item.title}\n                title={item.title}\n                style={{ fontWeight: 'bold' }}\n              />\n            ))}\n          </Steps>\n          <div className='steps-content'>{steps[current].content}</div>\n          <div className='steps-action buttonWrapperClass'>\n            {current < steps.length - 1 && (\n              <Button colorScheme='orange' mr={5} onClick={() => next()}>\n                Next\n              </Button>\n            )}\n            {current === steps.length - 1 && (\n              <Button colorScheme='orange' mr={5} onClick={() => next()}>\n                Done\n              </Button>\n            )}\n            {current > 0 && (\n              <Button colorScheme='teal' onClick={() => prev()}>\n                Previous\n              </Button>\n            )}\n          </div>\n        </Box>\n      </Box>\n    </OwnerLayout>\n  )\n}\n\nexport default CreatePlace\n"]},"metadata":{},"sourceType":"module"}