{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/hoangdk/Documents/LinhNgu/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/hoangdk/Documents/LinhNgu/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/hoangdk/Documents/LinhNgu/easy-accomod-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/hoangdk/Documents/LinhNgu/easy-accomod-webapp/src/components/new-place/place-image/PlaceImage.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/* eslint-disable implicit-arrow-linebreak */\n\n/* eslint-disable @typescript-eslint/no-misused-promises */\n\n/* eslint-disable @typescript-eslint/ban-types */\n\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n\n/* eslint-disable @typescript-eslint/no-unsafe-return */\nimport { useEffect, useState } from 'react';\nimport { Box, FormControl, FormLabel, Text, Flex, Spacer } from '@chakra-ui/react';\nimport { Upload, Modal } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { storage } from 'firebase-config';\nimport InfoBox from '../InfoBox';\n\nvar PlaceImage = function PlaceImage(_ref) {\n  _s();\n\n  var completeStep = _ref.completeStep,\n      syncData = _ref.syncData,\n      imageData = _ref.imageData;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      previewVisible = _useState2[0],\n      setPreviewVisible = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      previewImage = _useState4[0],\n      setPreviewImage = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      previewTitle = _useState6[0],\n      setPreviewTitle = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      fileList = _useState8[0],\n      setFileList = _useState8[1];\n\n  useEffect(function () {\n    if (fileList.length >= 3) {\n      completeStep(true);\n    } else {\n      completeStep(false);\n    }\n  }, [completeStep, fileList.length]);\n  useEffect(function () {\n    var temp = [];\n\n    if (imageData) {\n      imageData === null || imageData === void 0 ? void 0 : imageData.forEach(function (image) {\n        temp.push({\n          url: image\n        });\n      });\n      setFileList(temp);\n    }\n  }, []);\n\n  var getBase64 = function getBase64(file) {\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        return resolve(reader.result);\n      };\n\n      reader.onerror = function (error) {\n        return reject(error);\n      };\n    });\n  };\n\n  var handleCancel = function handleCancel() {\n    return setPreviewVisible(false);\n  };\n\n  var handlePreview = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!file.url && !file.preview)) {\n                _context.next = 4;\n                break;\n              }\n\n              _context.next = 3;\n              return getBase64(file.originFileObj);\n\n            case 3:\n              file.preview = _context.sent;\n\n            case 4:\n              setPreviewImage(file.url || file.preview);\n              setPreviewVisible(true);\n              setPreviewTitle(file.name || file.url.substring(file.url.lastIndexOf('/') + 1));\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handlePreview(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(_ref3) {\n    var fileList = _ref3.fileList;\n    console.log(fileList);\n    setFileList(fileList);\n    var images = []; // fileList.map((file: any) => {\n    //   console.log(file.response)\n    // })\n\n    fileList.forEach(function (file) {\n      if (file.response) {\n        file.url = file.response.url;\n        images.push(file.response);\n      }\n    });\n    syncData(fileList);\n    console.log(images);\n  };\n\n  var uploadButton = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8\n      },\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, _this);\n\n  var customRequest = function customRequest(_ref4) {\n    var file = _ref4.file,\n        onSuccess = _ref4.onSuccess;\n    var name = Date.now().toString();\n    storage().ref('images').child(name).put(file).then(function () {\n      storage().ref('images').child(name).getDownloadURL().then(function (url) {\n        onSuccess(url);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    mt: 10,\n    pb: 10,\n    children: /*#__PURE__*/_jsxDEV(Flex, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        border: \"1px\",\n        borderColor: \"gray.200\",\n        borderRadius: \"md\",\n        p: 5,\n        w: \"60%\",\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          borderBottomColor: \"gray.200\",\n          borderBottomWidth: 1,\n          mb: 5,\n          pb: 3,\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            fontSize: \"xl\",\n            fontWeight: \"bold\",\n            children: \"H\\xECnh \\u1EA3nh ch\\u1ED7 ngh\\u1EC9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Text, {\n            color: \"gray.500\",\n            fontSize: \"md\",\n            children: \"M\\u1ED9t v\\xE0i t\\u1EA5m \\u1EA3nh \\u0111\\u1EB9p s\\u1EBD gi\\xFAp kh\\xE1ch h\\xE0ng c\\xF3 nhi\\u1EC1u thi\\u1EC7n c\\u1EA3m h\\u01A1n v\\u1EC1 ch\\u1ED7 ngh\\u1EC9 c\\u1EE7a b\\u1EA1n.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(FormControl, {\n          id: \"overview_image\",\n          isRequired: true,\n          mb: 5,\n          children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n            children: \"\\u1EA2nh ch\\u1ED7 ngh\\u1EC9 (\\xCDt nh\\u1EA5t 8 \\u1EA3nh):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Upload // customRequest={customRequest}\n          , {\n            action: \"localhost:3000\",\n            listType: \"picture-card\",\n            fileList: fileList,\n            onPreview: handlePreview,\n            onChange: handleChange,\n            children: fileList.length >= 8 ? null : uploadButton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n            visible: previewVisible,\n            title: previewTitle,\n            footer: null,\n            onCancel: handleCancel,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"example\",\n              style: {\n                width: '100%'\n              },\n              src: previewImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Box, {\n        w: \"35%\",\n        children: /*#__PURE__*/_jsxDEV(InfoBox, {\n          title: \"M\\u1ED9t v\\xE0i g\\u1EE3i \\xFD gi\\xFAp \\u1EA3nh ch\\u1ED7 ngh\\u1EC9 ghi \\u0111i\\u1EC3m trong m\\u1EAFt kh\\xE1ch h\\xE0ng\",\n          content: \"\\u1EA2nh b\\xECa l\\xE0 y\\u1EBFu t\\u1ED1 g\\xE2y \\u1EA5n t\\u01B0\\u1EE3ng \\u0111\\u1EA7u ti\\xEAn c\\u1EE7a ch\\u1ED7 ngh\\u1EC9 v\\u1EDBi kh\\xE1ch h\\xE0ng. \\u1EA2nh b\\xECa ch\\u1ED7 ngh\\u1EC9 n\\xEAn l\\xE0 t\\u1EA5m \\u1EA3nh c\\xF3 g\\xF3c r\\u1ED9ng, ch\\u1EE5p \\u0111\\u01B0\\u1EE3c t\\u1ED5ng quan ch\\u1ED7 ngh\\u1EC9, m\\xE0u s\\u1EAFc \\u1EA3nh s\\xE1ng v\\xE0 s\\u1EAFc n\\xE9t. H\\xE3y \\u0111\\u1EA3m b\\u1EA3o r\\u1EB1ng 5 \\u1EA3nh \\u0111\\u1EA7u ti\\xEAn c\\u1EE7a ch\\u1ED7 ngh\\u1EC9 \\u0111\\u1EC1u l\\xE0 \\u1EA3nh ngang, \\u0111\\u1EE7 \\xE1nh s\\xE1ng v\\xE0 th\\u1EC3 hi\\u1EC7n r\\xF5 nh\\u1EA5t c\\xE1c \\u01B0u \\u0111i\\u1EC3m t\\u1EA1i ch\\u1ED7 ngh\\u1EC9 c\\u1EE7a b\\u1EA1n.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(PlaceImage, \"AuQJ4BFDkbZjZ/jFsHLL+ipSST8=\");\n\n_c = PlaceImage;\nexport default PlaceImage;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlaceImage\");","map":{"version":3,"sources":["/home/hoangdk/Documents/LinhNgu/easy-accomod-webapp/src/components/new-place/place-image/PlaceImage.tsx"],"names":["useEffect","useState","Box","FormControl","FormLabel","Text","Flex","Spacer","Upload","Modal","PlusOutlined","storage","InfoBox","PlaceImage","completeStep","syncData","imageData","previewVisible","setPreviewVisible","previewImage","setPreviewImage","previewTitle","setPreviewTitle","fileList","setFileList","length","temp","forEach","image","push","url","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","handleCancel","handlePreview","preview","originFileObj","name","substring","lastIndexOf","handleChange","console","log","images","response","uploadButton","marginTop","customRequest","onSuccess","Date","now","toString","ref","child","put","then","getDownloadURL","catch","err","width"],"mappings":"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","sourcesContent":["/* eslint-disable implicit-arrow-linebreak */\n/* eslint-disable @typescript-eslint/no-misused-promises */\n/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-return */\nimport { useEffect, useState } from 'react'\nimport {\n  Box,\n  FormControl,\n  FormLabel,\n  Text,\n  Flex,\n  Spacer,\n} from '@chakra-ui/react'\nimport { Upload, Modal } from 'antd'\nimport { PlusOutlined } from '@ant-design/icons'\nimport { storage } from 'firebase-config'\nimport InfoBox from '../InfoBox'\n\nconst PlaceImage = ({\n  completeStep,\n  syncData,\n  imageData,\n}: {\n  completeStep: Function\n  syncData: Function\n  imageData: any\n}) => {\n  const [previewVisible, setPreviewVisible] = useState(false)\n  const [previewImage, setPreviewImage] = useState('')\n  const [previewTitle, setPreviewTitle] = useState('')\n  const [fileList, setFileList] = useState<Array<any>>([])\n\n  useEffect(() => {\n    if (fileList.length >= 3) {\n      completeStep(true)\n    } else {\n      completeStep(false)\n    }\n  }, [completeStep, fileList.length])\n\n  useEffect(() => {\n    const temp: Array<any> = []\n    if (imageData) {\n      imageData?.forEach((image: string) => {\n        temp.push({\n          url: image,\n        })\n      })\n      setFileList(temp)\n    }\n  }, [])\n\n  const getBase64 = (file: any) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader()\n      reader.readAsDataURL(file)\n      reader.onload = () => resolve(reader.result)\n      reader.onerror = (error) => reject(error)\n    })\n  }\n\n  const handleCancel = () => setPreviewVisible(false)\n\n  const handlePreview = async (file: any) => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj)\n    }\n    setPreviewImage(file.url || file.preview)\n    setPreviewVisible(true)\n    setPreviewTitle(\n      file.name || file.url.substring(file.url.lastIndexOf('/') + 1)\n    )\n  }\n\n  const handleChange = ({ fileList }: { fileList: Array<any> }) => {\n    console.log(fileList)\n    setFileList(fileList)\n    const images: Array<string> = []\n    // fileList.map((file: any) => {\n    //   console.log(file.response)\n    // })\n    fileList.forEach((file) => {\n      if (file.response) {\n        file.url = file.response.url\n        images.push(file.response)\n      }\n    })\n    syncData(fileList)\n    console.log(images)\n  }\n\n  const uploadButton = (\n    <div>\n      <PlusOutlined />\n      <div style={{ marginTop: 8 }}>Upload</div>\n    </div>\n  )\n  const customRequest = ({\n    file,\n    onSuccess,\n  }: {\n    file: any\n    onSuccess: Function\n  }): void => {\n    const name = Date.now().toString()\n    storage()\n      .ref('images')\n      .child(name)\n      .put(file)\n      .then(() => {\n        storage()\n          .ref('images')\n          .child(name)\n          .getDownloadURL()\n          .then((url) => {\n            onSuccess(url)\n          })\n          .catch((err) => {\n            console.log(err)\n          })\n      })\n  }\n  return (\n    <Box mt={10} pb={10}>\n      <Flex>\n        <Box\n          border='1px'\n          borderColor='gray.200'\n          borderRadius='md'\n          p={5}\n          w='60%'>\n          <Box borderBottomColor='gray.200' borderBottomWidth={1} mb={5} pb={3}>\n            <Text fontSize='xl' fontWeight='bold'>\n              Hình ảnh chỗ nghỉ\n            </Text>\n            <Text color='gray.500' fontSize='md'>\n              Một vài tấm ảnh đẹp sẽ giúp khách hàng có nhiều thiện cảm hơn về\n              chỗ nghỉ của bạn.\n            </Text>\n          </Box>\n          <FormControl id='overview_image' isRequired mb={5}>\n            <FormLabel>Ảnh chỗ nghỉ (Ít nhất 8 ảnh):</FormLabel>\n            <Upload\n              // customRequest={customRequest}\n              action='localhost:3000'\n              listType='picture-card'\n              fileList={fileList}\n              onPreview={handlePreview}\n              onChange={handleChange}>\n              {fileList.length >= 8 ? null : uploadButton}\n            </Upload>\n            <Modal\n              visible={previewVisible}\n              title={previewTitle}\n              footer={null}\n              onCancel={handleCancel}>\n              <img alt='example' style={{ width: '100%' }} src={previewImage} />\n            </Modal>\n          </FormControl>\n        </Box>\n        <Spacer />\n        <Box w='35%'>\n          <InfoBox\n            title='Một vài gợi ý giúp ảnh chỗ nghỉ ghi điểm trong mắt khách hàng'\n            content='Ảnh bìa là yếu tố gây ấn tượng đầu tiên của chỗ nghỉ với khách hàng. Ảnh bìa chỗ nghỉ nên là tấm ảnh có góc rộng, chụp được tổng quan chỗ nghỉ, màu sắc ảnh sáng và sắc nét.\n            Hãy đảm bảo rằng 5 ảnh đầu tiên của chỗ nghỉ đều là ảnh ngang, đủ ánh sáng và thể hiện rõ nhất các ưu điểm tại chỗ nghỉ của bạn.'\n          />\n        </Box>\n      </Flex>\n    </Box>\n  )\n}\n\nexport default PlaceImage\n"]},"metadata":{},"sourceType":"module"}